{"ast":null,"code":"var _jsxFileName = \"/Users/satoshiaikawa/react-mui-bookstore-k8s/src/SignIn.js\";\nimport * as React from 'react';\nimport { styled } from '@mui/material/styles';\nimport { Box, Button, Checkbox, Link, Typography, Container, FormControlLabel, CssBaseline, ThemeProvider, TextField, Paper, Grid } from '@mui/material';\nimport { commerce } from './lib/commerce';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Item = styled(Paper)(_ref => {\n  let {\n    theme\n  } = _ref;\n  return {\n    backgroundColor: theme.palette.mode === 'dark' ? '#1A2027' : '#fff',\n    ...theme.typography.body2,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  };\n}); ///Users/satoshiaikawa/react-mui-bookstore-k8s/src/assets/jacket.gif\n\n_c = Item;\nexport default function SignIn(_ref2) {\n  let {\n    onSignIn\n  } = _ref2;\n\n  const handleSignIn = async event => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n\n    for (var value of data.values()) {\n      console.log(value);\n    }\n\n    let email = data.get('email');\n    let password = data.get('password'); // login with self-provided auth API\n    //let result=fetchCustomerFromAuthApi({email, password})\n\n    const url1 = new URL(\"http://localhost:3002/api/login/\" + email + \"/\" + password);\n    let headers1 = {\n      \"Content-Type\": \"application/json  charset=UTF-8\",\n      \"Accept\": \"application/json\"\n    };\n    fetch(url1, {\n      method: \"GET\",\n      headers: headers1\n    }).then(response => response.json()).then(json => {\n      console.log(json);\n\n      if (json.customer_id !== undefined) {\n        localStorage.setItem('token', json.customer_id);\n\n        const fetchCartByCartId = async cartId => {\n          await commerce.cart.retrieve(cartId).then(cart => {\n            console.log(cart);\n            localStorage.setItem('cart_id', cart.id);\n            window.location.href = \"/\";\n          });\n        };\n\n        fetchCartByCartId(json.cart_id);\n      } else {\n        console.log(\"signin failed\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    elevation: 0,\n    sx: {\n      p: 2,\n      margin: 'auto',\n      maxWidth: '50%',\n      flexGrow: 1,\n      backgroundColor: theme => theme.palette.mode === 'dark' ? '#1A2027' : '#fff'\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      component: \"form\",\n      noValidate: true,\n      onSubmit: onSignIn,\n      container: true,\n      spacing: 2,\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        md: 12,\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          elevation: 0,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \"\\u30ED\\u30B0\\u30A4\\u30F3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 32\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 74\n          }, this), \"\\u30E1\\u30FC\\u30EB\\u3068\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          fullWidth: true,\n          id: \"email\",\n          label: \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\uFF08Gmail\\u7B49\\u306E\\u30D5\\u30EA\\u30FC\\u30E1\\u30FC\\u30EB\\u63A8\\u5968\\uFF09\",\n          name: \"email\",\n          autoComplete: \"my-email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          fullWidth: true,\n          name: \"password\",\n          label: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n          type: \"password\",\n          id: \"password\",\n          autoComplete: \"my-password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          sx: {\n            margin: 'auto',\n            height: 70\n          },\n          children: \"\\u30ED\\u30B0\\u30A4\\u30F3\\u3059\\u308B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        md: 12,\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          elevation: 0,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            href: \"/signup\",\n            variant: \"text\",\n            sx: {\n              margin: 'auto',\n              height: 70\n            },\n            children: \"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u65B0\\u898F\\u3067\\u4F5C\\u6210\\u3059\\u308B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n} // for testing form fubmission\n\n_c2 = SignIn;\n\nconst handleSubmit = event => {\n  event.preventDefault();\n  const data = new FormData(event.currentTarget); // eslint-disable-next-line no-console\n\n  console.log({\n    email: data.get('email'),\n    password: data.get('password')\n  });\n};\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Item\");\n$RefreshReg$(_c2, \"SignIn\");","map":{"version":3,"sources":["/Users/satoshiaikawa/react-mui-bookstore-k8s/src/SignIn.js"],"names":["React","styled","Box","Button","Checkbox","Link","Typography","Container","FormControlLabel","CssBaseline","ThemeProvider","TextField","Paper","Grid","commerce","Item","theme","backgroundColor","palette","mode","typography","body2","padding","spacing","textAlign","color","text","secondary","SignIn","onSignIn","handleSignIn","event","preventDefault","data","FormData","currentTarget","value","values","console","log","email","get","password","url1","URL","headers1","fetch","method","headers","then","response","json","customer_id","undefined","localStorage","setItem","fetchCartByCartId","cartId","cart","retrieve","id","window","location","href","cart_id","p","margin","maxWidth","flexGrow","height","handleSubmit"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { styled } from '@mui/material/styles';\nimport { Box, Button, Checkbox, Link, Typography, Container, FormControlLabel, CssBaseline, ThemeProvider, TextField, Paper, Grid } from '@mui/material';\n\nimport {commerce} from './lib/commerce'\n\nconst Item = styled(Paper)(({ theme }) => ({\n  backgroundColor: theme.palette.mode === 'dark' ? '#1A2027' : '#fff',\n  ...theme.typography.body2,\n  padding: theme.spacing(1),\n  textAlign: 'center',\n  color: theme.palette.text.secondary,\n}));\n///Users/satoshiaikawa/react-mui-bookstore-k8s/src/assets/jacket.gif\nexport default function SignIn({onSignIn}) {\n\n\n  const handleSignIn =  async (event) => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    for (var value of data.values()) {\n        console.log(value);\n    }\n    let email=data.get('email')\n    let password=data.get('password')\n\n    // login with self-provided auth API\n    //let result=fetchCustomerFromAuthApi({email, password})\n    const url1 = new URL(\n      \"http://localhost:3002/api/login/\"+email+\"/\"+password\n    );\n    let headers1 = {\n      \"Content-Type\": \"application/json  charset=UTF-8\",\n      \"Accept\": \"application/json\",\n    };\n\n    fetch(url1, {\n      method: \"GET\",\n      headers: headers1\n    })\n    .then(response => response.json())\n    .then(json => {\n      console.log(json);\n      if(json.customer_id!==undefined){\n        localStorage.setItem('token', json.customer_id)\n        const fetchCartByCartId = async (cartId) => {\n          await commerce.cart.retrieve(cartId)\n          .then(cart => {\n            console.log(cart)\n            localStorage.setItem('cart_id', cart.id)\n            window.location.href=\"/\"\n          });\n        }\n        fetchCartByCartId(json.cart_id)\n        \n      }else{\n        console.log(\"signin failed\")\n      }\n    });\n\n}\n\n  return (        \n    <Paper\n    elevation={0}\n    sx={{\n      p: 2,\n      margin: 'auto',\n      maxWidth: '50%',\n      flexGrow: 1,\n      backgroundColor: (theme) =>\n        theme.palette.mode === 'dark' ? '#1A2027' : '#fff',\n    }}\n  >\n\n      <Grid component=\"form\" noValidate onSubmit={onSignIn} container spacing={2} justifyContent='center' alignItems='center' >\n\n        <Grid item xs={6} md={12}>\n          <Item elevation={0} ><Typography variant=\"h5\">ログイン</Typography><br/>メールとパスワードを入力してください:</Item>\n        </Grid>\n\n        <Grid item xs={12}>\n          <TextField\n            required\n            fullWidth\n            id=\"email\"\n            label=\"メールアドレス（Gmail等のフリーメール推奨）\"\n            name=\"email\"\n            autoComplete=\"my-email\"\n          />\n        </Grid>\n\n        <Grid item xs={12}>\n          <TextField\n            required\n            fullWidth\n            name=\"password\"\n            label=\"パスワード\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"my-password\"\n          />\n        </Grid>\n\n        <Grid item xs={12}>\n        </Grid>\n\n      <Grid item xs={12}>\n      <Button\n        type=\"submit\"\n        fullWidth\n        variant=\"contained\"\n        sx={{ margin:'auto', height:70 }}\n      >\n        ログインする\n      </Button>\n      </Grid>\n\n      <Grid item xs={6} md={12}>\n          <Item elevation={0} >\n          <Button\n            href=\"/signup\"\n            variant=\"text\"\n            sx={{ margin:'auto', height:70 }}\n          >\n            アカウントを新規で作成する\n          </Button>\n          </Item>\n      </Grid>\n\n      </Grid>\n      </Paper>\n  );\n}\n\n\n// for testing form fubmission\nconst handleSubmit = (event) => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    // eslint-disable-next-line no-console\n    console.log({\n      email: data.get('email'),\n      password: data.get('password'),\n    });\n  };"]},"metadata":{},"sourceType":"module"}
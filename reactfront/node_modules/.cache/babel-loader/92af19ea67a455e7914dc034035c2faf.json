{"ast":null,"code":"var _jsxFileName = \"/Users/satoshiaikawa/react-mui-bookstore-k8s/src/components/ProductView/productView.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport Grid from '@mui/material/Grid';\nimport { Button, Divider, Paper } from '@mui/material';\nimport { Link } from 'react-router-dom';\nimport { useState, useEffect } from \"react\";\nimport './styles.css';\nimport CategoryTags from './CategoryTags';\nimport axios from 'axios';\nimport Review from './Review';\nimport { commerce } from '../../lib/commerce';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst createMarkup = text => {\n  return {\n    __html: text\n  };\n};\n\nconst ProductView = _ref => {\n  _s();\n\n  let {\n    onAddToCart\n  } = _ref;\n  const [product, setProduct] = useState({});\n  const [reviews, setReviews] = useState([]); // useStateで配列の更新が上手くいかない\n  // https://zenn.dev/gunners6518/articles/4c06488cfa402e\n\n  const [categories, setCategories] = useState([]);\n  useEffect(() => {\n    const id = window.location.pathname.split(\"/\");\n    console.log(id);\n    fetchProduct(id[2]);\n    fetchReviews(id[2]);\n  }, []);\n\n  const fetchProduct = async productId => {\n    const response = await commerce.products.retrieve(productId);\n    console.log({\n      response\n    });\n    const {\n      id,\n      name,\n      price,\n      image,\n      quantity,\n      description\n    } = response;\n    setProduct({\n      id,\n      name,\n      quantity,\n      description,\n      src: image.url,\n      price: price.formatted_with_symbol\n    });\n  };\n\n  const fetchReviews = async productId => {\n    axios.get(\"http://localhost:3003/api/reviews/\" + productId).then(res => {\n      setReviews(res.data);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        className: \"product-view\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            className: \"image-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: product.src,\n              alt: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 5,\n            className: \"text\",\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h2\",\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 40\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"p\",\n              dangerouslySetInnerHTML: createMarkup(product.description)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h3\",\n              color: \"secondary\",\n              children: [\"\\u4FA1\\u683C: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [\" \", product.price, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 63\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CategoryTags, {\n              categoriesa: categories\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              justifyContent: \"space-evenly\",\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: true,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  size: \"small\",\n                  component: Link,\n                  to: \"/\",\n                  children: \"\\u623B\\u308B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 3\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 3\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: true,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  size: \"small\",\n                  onClick: () => onAddToCart(product.id, 1),\n                  children: \"\\u8CB7\\u3044\\u7269\\u304B\\u3054\\u3078\\u5165\\u308C\\u308B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 3\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 3\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 2\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        color: \"black\",\n        children: \"\\u3053\\u306E\\u672C\\u306E\\u30EC\\u30D3\\u30E5\\u30FC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 86\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 1,\n        children: reviews.map(rev => {\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 3,\n            sm: 6,\n            md: 4,\n            children: /*#__PURE__*/_jsxDEV(Review, {\n              review: rev\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 44\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 11\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 91\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProductView, \"mtrhJ+k7987F/iL0xq47E62LrOY=\");\n\n_c = ProductView;\nexport default ProductView;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductView\");","map":{"version":3,"sources":["/Users/satoshiaikawa/react-mui-bookstore-k8s/src/components/ProductView/productView.js"],"names":["React","Typography","Container","Grid","Button","Divider","Paper","Link","useState","useEffect","CategoryTags","axios","Review","commerce","createMarkup","text","__html","ProductView","onAddToCart","product","setProduct","reviews","setReviews","categories","setCategories","id","window","location","pathname","split","console","log","fetchProduct","fetchReviews","productId","response","products","retrieve","name","price","image","quantity","description","src","url","formatted_with_symbol","get","then","res","data","map","rev"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport Grid from '@mui/material/Grid';\nimport { Button, Divider, Paper } from '@mui/material';\n\nimport { Link } from 'react-router-dom';\nimport { useState, useEffect } from \"react\";\nimport './styles.css'\nimport CategoryTags from './CategoryTags'\n\nimport axios from 'axios';\nimport Review from './Review';\n\nimport {commerce} from '../../lib/commerce';\n\n\nconst createMarkup = (text) => {\n    return { __html: text };\n  };\n\nconst ProductView = ({ onAddToCart }) => {\n\n    const [product, setProduct] = useState({});\n    const [reviews, setReviews] = useState([]);\n    // useStateで配列の更新が上手くいかない\n    // https://zenn.dev/gunners6518/articles/4c06488cfa402e\n    const [categories, setCategories] = useState([]);\n\n    useEffect(() => {\n      const id = window.location.pathname.split(\"/\");\n      console.log(id);\n      fetchProduct(id[2]);\n      fetchReviews(id[2]);\n    }, []);\n\n    const fetchProduct = async (productId) => {\n      const response = await commerce.products.retrieve(productId);\n      console.log({ response });\n      const { id, name, price, image, quantity, description } = response;\n      setProduct({\n        id, \n        name,\n        quantity,\n        description,\n        src: image.url,\n        price: price.formatted_with_symbol,\n      });\n    };\n\n\n      const fetchReviews = async (productId) => {\n        axios.get(\"http://localhost:3003/api/reviews/\"+productId)\n        .then(res => {\n          setReviews(res.data);\n        })\n      };\n\n    return (\n        <Grid container>\n        <Grid item>\n        <Container className=\"product-view\">\n          <Grid container>\n            <Grid item xs={12} md={6} className=\"image-wrapper\">\n              <img src={product.src} alt={product.name}\n              />\n            </Grid>\n            <Grid item xs={12} md={5} className=\"text\">\n              <Typography variant=\"h2\"><b>{product.name}</b></Typography>\n              <hr />\n              <Typography variant=\"p\" dangerouslySetInnerHTML={createMarkup(product.description)} />\n              <Typography variant=\"h3\" color=\"secondary\" >価格: <b> {product.price} </b> </Typography>\n              <CategoryTags categoriesa={categories} />\n              <br/>\n <Grid container justifyContent=\"space-evenly\">\n  <Grid item xs>\n  <Button variant=\"outlined\" size=\"small\" component={Link} to='/' >戻る</Button>\n  </Grid>\n  <Grid item xs>\n  <Button variant=\"contained\" size=\"small\" onClick={() => onAddToCart(product.id, 1)}>買い物かごへ入れる</Button>\n  </Grid>\n</Grid>\n            </Grid>\n          </Grid>\n        </Container>\n        </Grid>\n        \n        <Grid item><br/><Typography variant=\"h5\" color=\"black\" >この本のレビュー</Typography><br/><Grid container spacing={1}>{reviews.map((rev) => {\n        return (\n          <Grid item xs={3} sm={6} md={4} ><Review review={rev} /></Grid>\n        );\n      })}</Grid></Grid>\n     </Grid>\n        \n      );\n    };\n    \n    export default ProductView;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/satoshiaikawa/react-mui-bookstore-k8s/src/SignUp.js\";\nimport * as React from 'react';\nimport { styled } from '@mui/material/styles';\nimport { useNavigate } from 'react-router-dom';\nimport { Box, Button, Checkbox, Link, Typography, Container, FormControlLabel, CssBaseline, ThemeProvider, TextField, Paper, Grid } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Item = styled(Paper)(_ref => {\n  let {\n    theme\n  } = _ref;\n  return {\n    backgroundColor: theme.palette.mode === 'dark' ? '#1A2027' : '#fff',\n    ...theme.typography.body2,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  };\n}); ///Users/satoshiaikawa/react-mui-bookstore-k8s/src/assets/jacket.gif\n\n_c = Item;\nexport default function SignUp() {\n  // signUp\n  const createCustomer = async event => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n\n    for (var value of data.values()) {\n      console.log(value);\n    }\n\n    let firstname = data.get('firstname');\n    let lastname = data.get('lastname');\n    let email = data.get('email');\n    let password = data.get('password');\n    const url = new URL(\"https://api.chec.io/v1/customers\");\n    let headers = {\n      \"X-Authorization\": \"sk_test_39980259115a0d9753812433d6740aa60b83dc9a64fba\",\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\"\n    };\n    let body = {\n      \"email\": email,\n      \"firstname\": firstname,\n      \"lastname\": lastname,\n      \"external_id\": \"MY_CRM_USER_123\"\n    };\n    let customerId = undefined;\n    fetch(url, {\n      method: \"POST\",\n      headers: headers,\n      body: JSON.stringify(body)\n    }).then(response => response.json()).then(json => {\n      console.log(json);\n      customerId = json.id;\n\n      if (customerId !== undefined) {\n        //console.log(\"signup success\")\n        //Get customer\n        const url = new URL(\"https://api.chec.io/v1/customers/\" + customerId);\n        let headers = {\n          \"X-Authorization\": \"sk_test_39980259115a0d9753812433d6740aa60b83dc9a64fba\",\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\"\n        };\n        fetch(url, {\n          method: \"GET\",\n          headers: headers\n        }).then(response => response.json()).then(json => {\n          //console.log(json);\n          localStorage.setItem('token', json.id); // add chec customer to self-proviced auth API to allow authentication with email and password\n          //addCustomerToAuthApi({customer_id:resultChec.id, email:resultChec.email, firstname, lastname, password})\n\n          const customerId = json.id;\n          const url2 = new URL(\"http://localhost:3002/api/register/\" + customerId + \"/\" + email + \"/\" + firstname + \"/\" + lastname + \"/\" + password);\n          let headers2 = {\n            \"Content-Type\": \"application/json  charset=UTF-8\",\n            \"Accept\": \"application/json\"\n          };\n          fetch(url2, {\n            method: \"GET\",\n            headers: headers2\n          }).then(response => response.json()).then(json => {\n            console.log(json);\n\n            const createCart = async () => {\n              // Retrieve the customers current cart (tracked by their browser)\n              await commerce.cart.refresh().then(cart => {\n                console.log(cart);\n                localStorage.setItem('cart_id', cart.id);\n                const url3 = new URL(\"http://localhost:3002/api/cart/\" + customerId + \"/\" + cart.id);\n                let headers3 = {\n                  \"Content-Type\": \"application/json  charset=UTF-8\",\n                  \"Accept\": \"application/json\"\n                };\n                fetch(url3, {\n                  method: \"GET\",\n                  headers: headers3\n                }).then(response => response.json()).then(json => {\n                  console.log(json);\n                  window.location.href = \"/\";\n                });\n              });\n            };\n\n            createCart();\n          });\n        });\n      } else {\n        console.log(\"signup failed\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    elevation: 0,\n    sx: {\n      p: 2,\n      margin: 'auto',\n      maxWidth: '50%',\n      flexGrow: 1,\n      backgroundColor: theme => theme.palette.mode === 'dark' ? '#1A2027' : '#fff'\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      component: \"form\",\n      noValidate: true,\n      onSubmit: createCustomer,\n      container: true,\n      spacing: 2,\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        md: 12,\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          elevation: 0,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \"\\u65B0\\u898F\\u767B\\u9332\\u30D5\\u30A9\\u30FC\\u30E0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 32\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 78\n          }, this), \"\\u4EE5\\u4E0B\\u306E\\u60C5\\u5831\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 12,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          fullWidth: true,\n          id: \"lastname\",\n          label: \"\\u59D3\",\n          name: \"lastname\",\n          autoComplete: \"family-name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 12,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          autoComplete: \"given-name\",\n          name: \"firstname\",\n          required: true,\n          fullWidth: true,\n          id: \"firstname\",\n          label: \"\\u540D\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          fullWidth: true,\n          id: \"email\",\n          label: \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\uFF08Gmail\\u7B49\\u306E\\u30D5\\u30EA\\u30FC\\u30E1\\u30FC\\u30EB\\u63A8\\u5968\\uFF09\",\n          name: \"email\",\n          autoComplete: \"my-email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          fullWidth: true,\n          name: \"password\",\n          label: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n          type: \"password\",\n          id: \"password\",\n          autoComplete: \"my-password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n          control: /*#__PURE__*/_jsxDEV(Checkbox, {\n            value: \"allowExtraEmails\",\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 22\n          }, this),\n          label: \"\\u65B0\\u5546\\u54C1\\u3084\\u30AD\\u30E3\\u30F3\\u30DA\\u30FC\\u30F3\\u3001\\u30AF\\u30FC\\u30DD\\u30F3\\u306A\\u3069\\u306E\\u304A\\u5F97\\u306A\\u60C5\\u5831\\u3092\\u53D7\\u3051\\u53D6\\u308B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          sx: {\n            margin: 'auto',\n            height: 70\n          },\n          children: \"\\u65B0\\u898F\\u767B\\u9332\\u3059\\u308B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        md: 12,\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          elevation: 0,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            href: \"/signin\",\n            variant: \"text\",\n            sx: {\n              margin: 'auto',\n              height: 70\n            },\n            children: \"\\u30B5\\u30A4\\u30F3\\u30A4\\u30F3\\u306F\\u3053\\u3061\\u3089\\u304B\\u3089\\u3000\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n} // for testing form fubmission\n\n_c2 = SignUp;\n\nconst handleSubmit = event => {\n  event.preventDefault();\n  const data = new FormData(event.currentTarget); // eslint-disable-next-line no-console\n\n  console.log({\n    email: data.get('email'),\n    password: data.get('password')\n  });\n};\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Item\");\n$RefreshReg$(_c2, \"SignUp\");","map":{"version":3,"sources":["/Users/satoshiaikawa/react-mui-bookstore-k8s/src/SignUp.js"],"names":["React","styled","useNavigate","Box","Button","Checkbox","Link","Typography","Container","FormControlLabel","CssBaseline","ThemeProvider","TextField","Paper","Grid","Item","theme","backgroundColor","palette","mode","typography","body2","padding","spacing","textAlign","color","text","secondary","SignUp","createCustomer","event","preventDefault","data","FormData","currentTarget","value","values","console","log","firstname","get","lastname","email","password","url","URL","headers","body","customerId","undefined","fetch","method","JSON","stringify","then","response","json","id","localStorage","setItem","url2","headers2","createCart","commerce","cart","refresh","url3","headers3","window","location","href","p","margin","maxWidth","flexGrow","height","handleSubmit"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { styled } from '@mui/material/styles';\nimport { useNavigate } from 'react-router-dom';\nimport { Box, Button, Checkbox, Link, Typography, Container, FormControlLabel, CssBaseline, ThemeProvider, TextField, Paper, Grid } from '@mui/material';\n\n\nconst Item = styled(Paper)(({ theme }) => ({\n  backgroundColor: theme.palette.mode === 'dark' ? '#1A2027' : '#fff',\n  ...theme.typography.body2,\n  padding: theme.spacing(1),\n  textAlign: 'center',\n  color: theme.palette.text.secondary,\n}));\n///Users/satoshiaikawa/react-mui-bookstore-k8s/src/assets/jacket.gif\nexport default function SignUp() {\n\n\n  // signUp\n  const createCustomer =  async (event) => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    for (var value of data.values()) {\n        console.log(value);\n    }\n    let firstname=data.get('firstname')\n    let lastname=data.get('lastname')\n    let email=data.get('email')\n    let password=data.get('password')\n\n    const url = new URL(\n      \"https://api.chec.io/v1/customers\"\n  );\n  \n  let headers = {\n      \"X-Authorization\": \"sk_test_39980259115a0d9753812433d6740aa60b83dc9a64fba\",\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\",\n  };\n  \n  let body = {\n      \"email\": email,\n      \"firstname\": firstname,\n      \"lastname\": lastname,\n      \"external_id\": \"MY_CRM_USER_123\"\n  }\n  \n  let customerId=undefined\n  fetch(url, {\n      method: \"POST\",\n      headers: headers,\n      body: JSON.stringify(body)\n  })\n      .then(response => response.json())\n      .then(json => {\n        console.log(json);\n        customerId=json.id\n        if(customerId!==undefined){\n          //console.log(\"signup success\")\n          //Get customer\n          const url = new URL(\n            \"https://api.chec.io/v1/customers/\"+customerId\n        );\n        \n        let headers = {\n            \"X-Authorization\": \"sk_test_39980259115a0d9753812433d6740aa60b83dc9a64fba\",\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\",\n        };\n        \n        fetch(url, {\n            method: \"GET\",\n            headers: headers,\n        })\n            .then(response => response.json())\n            .then(json => {\n              //console.log(json);\n              localStorage.setItem('token',json.id)\n\n              // add chec customer to self-proviced auth API to allow authentication with email and password\n              //addCustomerToAuthApi({customer_id:resultChec.id, email:resultChec.email, firstname, lastname, password})\n              const customerId=json.id\n              const url2 = new URL(\n                \"http://localhost:3002/api/register/\"+customerId+\"/\"+email+\"/\"+firstname+\"/\"+lastname+\"/\"+password\n              );\n\n              let headers2 = {\n                \"Content-Type\": \"application/json  charset=UTF-8\",\n                \"Accept\": \"application/json\",\n              };\n\n              fetch(url2, {\n                method: \"GET\",\n                headers: headers2\n              })\n              .then(response => response.json())\n              .then(json => {\n                  console.log(json);\n                  const createCart = async () => {\n                    // Retrieve the customers current cart (tracked by their browser)\n                    await commerce.cart.refresh()\n                    .then(cart => {\n                        console.log(cart)\n                        localStorage.setItem('cart_id', cart.id)\n                        const url3 = new URL(\n                          \"http://localhost:3002/api/cart/\"+customerId+\"/\"+cart.id\n                        );\n          \n                        let headers3 = {\n                          \"Content-Type\": \"application/json  charset=UTF-8\",\n                          \"Accept\": \"application/json\",\n                        };\n          \n                        fetch(url3, {\n                          method: \"GET\",\n                          headers: headers3\n                        })\n                        .then(response => response.json())\n                        .then(json => {\n                            console.log(json);\n                            window.location.href=\"/\"\n                        });\n\n                    });\n                  }\n                  createCart()\n\n              });\n\n              });\n\n        }else{\n          console.log(\"signup failed\")\n        }\n      });\n        \n\n  }\n\n  return (        \n    <Paper\n    elevation={0}\n    sx={{\n      p: 2,\n      margin: 'auto',\n      maxWidth: '50%',\n      flexGrow: 1,\n      backgroundColor: (theme) =>\n        theme.palette.mode === 'dark' ? '#1A2027' : '#fff',\n    }}\n  >\n\n      <Grid component=\"form\" noValidate onSubmit={createCustomer} container spacing={2} justifyContent='center' alignItems='center' >\n\n        <Grid item xs={6} md={12}>\n          <Item elevation={0} ><Typography variant=\"h5\">新規登録フォーム</Typography><br/>以下の情報を入力してください:</Item>\n        </Grid>\n\n        <Grid item xs={12} sm={12}>\n          <TextField\n            required\n            fullWidth\n            id=\"lastname\"\n            label=\"姓\"\n            name=\"lastname\"\n            autoComplete=\"family-name\"\n          />\n        </Grid>\n\n        <Grid item xs={12} sm={12}>\n          <TextField\n            autoComplete=\"given-name\"\n            name=\"firstname\"\n            required\n            fullWidth\n            id=\"firstname\"\n            label=\"名\"\n            autoFocus\n          />\n        </Grid>\n\n        <Grid item xs={12}>\n          <TextField\n            required\n            fullWidth\n            id=\"email\"\n            label=\"メールアドレス（Gmail等のフリーメール推奨）\"\n            name=\"email\"\n            autoComplete=\"my-email\"\n          />\n        </Grid>\n\n        <Grid item xs={12}>\n          <TextField\n            required\n            fullWidth\n            name=\"password\"\n            label=\"パスワード\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"my-password\"\n          />\n        </Grid>\n\n        <Grid item xs={12}>\n          <FormControlLabel\n            control={<Checkbox value=\"allowExtraEmails\" color=\"primary\" />}\n            label=\"新商品やキャンペーン、クーポンなどのお得な情報を受け取る\"\n          />\n        </Grid>\n\n        <Grid item xs={12}>\n        <Button\n        type=\"submit\"\n        fullWidth\n        variant=\"contained\"\n        sx={{ margin:'auto', height:70 }}\n        >\n        新規登録する\n        </Button>\n        </Grid>\n\n        <Grid item xs={6} md={12}>\n          <Item elevation={0} >\n          <Button\n            href=\"/signin\"\n            variant=\"text\"\n            sx={{ margin:'auto', height:70 }}\n          >\n            サインインはこちらから　\n          </Button>\n          </Item>\n        </Grid>\n\n      </Grid>\n      </Paper>\n  );\n}\n\n\n// for testing form fubmission\nconst handleSubmit = (event) => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    // eslint-disable-next-line no-console\n    console.log({\n      email: data.get('email'),\n      password: data.get('password'),\n    });\n  };"]},"metadata":{},"sourceType":"module"}